<!DOCTYPE html>
<html lang="es">
<head>
    <script src="https://www.gstatic.com/firebasejs/6.0.4/firebase-app.js"></script>

  <script>
  // Your web app's Firebase configuration

</script>
  
  <script src="https://www.gstatic.com/firebasejs/5.8.3/firebase.js"></script>
<meta charset="utf-8">
  <title>geo localizacion</title>
<script type="text/javascript">






  // Initialize Firebase
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBIW5BVeYOi6gujCvVaYkexrBZYS3OpgWw",
    authDomain: "mar3-9d515.firebaseapp.com",
    databaseURL: "https://mar3-9d515.firebaseio.com",
    projectId: "mar3-9d515",
    storageBucket: "mar3-9d515.appspot.com",
    messagingSenderId: "1:298162663612:web:fc442af070821607"
  };
  firebase.initializeApp(config);













function loadLocation () {
  //inicializamos la funcion y definimos  el tiempo maximo ,las funciones de error y exito.
  navigator.geolocation.getCurrentPosition(viewMap);
}
 
//Funcion de exito
function viewMap (position) {
  
  var lon = position.coords.longitude;  //guardamos la longitud
  var lat = position.coords.latitude;   //guardamos la latitud
  console.log(lat+" la   lon"+lon);
 
  var link = "http://maps.google.com/?ll="+lat+","+lon+"&z=14";
  document.getElementById("long").innerHTML = "Longitud: "+lon;
  document.getElementById("latitud").innerHTML = "Latitud: "+lat;
 
  document.getElementById("link").href = link;
  firebase.database().ref().child("ok").child("lat").set(lat);
  firebase.database().ref().child("ok").child("lng").set(lon);


}
 
 
 
function ViewError (error) {
 
} 
 
 loadLocation ();
 
  </script>
  
</head>
<body onload="loadLocation();">
  <h1></h1>
 
<label id="long"></label> <br/>
<label id="latitud"></label> <br/>
<a id="link" target="_blank">Enlace al mapa</a>
 
 
</body>
</html>
